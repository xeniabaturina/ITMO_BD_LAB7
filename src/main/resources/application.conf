datamart {
  # ClickHouse configuration
  clickhouse {
    host = "localhost"
    host = ${?CLICKHOUSE_HOST}
    port = 8123
    port = ${?CLICKHOUSE_PORT}
    database = "food_clustering"
    database = ${?CLICKHOUSE_DATABASE}
    user = "default"
    user = ${?CLICKHOUSE_USER}
    password = ""
    password = ${?CLICKHOUSE_PASSWORD}
    
    # Connection pool settings
    max_connections = 10
    connection_timeout = 30000
    socket_timeout = 30000
  }
  
  # MySQL source configuration
  mysql {
    host = "localhost"
    host = ${?MYSQL_HOST}
    port = 3306
    port = ${?MYSQL_PORT}
    database = "food_clustering"
    database = ${?MYSQL_DATABASE}
    user = "cluster_user"
    user = ${?MYSQL_USER}
    password = "cluster_password"
    password = ${?MYSQL_PASSWORD}
    
    # Connection pool settings
    max_connections = 5
    connection_timeout = 30000
  }
  
  # API server configuration
  api {
    host = "0.0.0.0"
    host = ${?API_HOST}
    port = 8080
    port = ${?API_PORT}
    
    # Request timeout
    request_timeout = 60000
  }
  
  # Data processing configuration
  processing {
    # Batch size for data processing
    batch_size = 1000
    
    # Feature configuration
    features = [
      "energy_100g",
      "proteins_100g", 
      "carbohydrates_100g",
      "sugars_100g",
      "fat_100g",
      "saturated_fat_100g",
      "fiber_100g",
      "salt_100g",
      "sodium_100g"
    ]
    
    # Outlier removal percentiles
    outlier_percentiles = [0.02, 0.98]
    
    # Minimum valid fields required
    min_valid_fields = 5
    
    # Maximum records to process
    max_records = 200000
  }
  
  # Logging configuration
  logging {
    level = "INFO"
    pattern = "%d{yyyy-MM-dd HH:mm:ss} [%level] %logger{36} - %msg%n"
  }
}
